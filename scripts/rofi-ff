#!/usr/bin/bash

FF_DIR="$HOME/.mozilla/firefox"

ROFI_FLAGS=(
    $ROFI_FLAGS
    -no-sorting -no-show-icons
    -i -p 'Choose Firefox Profile'
)

PROFILES="$(awk '/Name=/{sub("Name=",""); print}' "$FF_DIR/profiles.ini")"

SELECTION="$(echo "$PROFILES" | rofi -lines "$(echo "$PROFILES" | wc -l)" -dmenu "${ROFI_FLAGS[@]}")"
firefox -p "${SELECTION:?}"
